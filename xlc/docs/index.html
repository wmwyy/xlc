<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>消力池计算器 · B.1</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="hero">
    <div>
      <div class="eyebrow">附录 B.1 公式 · 即时试算</div>
      <h1>消力池计算器</h1>
      <p>按 B.1.1/B.1.2 计算 h<sub>c</sub>、h<sub>c</sub>''、ΔZ、d、L<sub>j</sub>、L<sub>sj</sub>，支持示例一键填充。</p>
      <div class="hero-actions">
        <button class="primary" id="fill-sample">填充示例</button>
        <a class="ghost" href="https://github.com/wmwyy/xlc" target="_blank" rel="noreferrer">GitHub 仓库</a>
      </div>
      <div class="note">纯前端计算，无需后端；适合部署 GitHub Pages。</div>
    </div>
  </header>

  <main class="layout">
    <section class="panel">
      <div class="form-grid">
        <label>σ₀ (跳跃淹没系数 1.05~1.10)<input type="number" step="0.0001" id="sigma0" /></label>
        <label>α (动能校正系数 1.0~1.05)<input type="number" step="0.0001" id="alpha" /></label>
        <label>q (单宽流量 m³/s/m)<input type="number" step="0.001" id="q" /></label>
        <label>b₁ (首端宽度 m)<input type="number" step="0.001" id="b1" /></label>
        <label>b₂ (末端宽度 m)<input type="number" step="0.001" id="b2" /></label>
        <label>T₀ (底板顶面总势能 m)<input type="number" step="0.001" id="T0" /></label>
        <label>p (校正长度参数 m)<input type="number" step="0.001" id="p" /></label>
        <label>h′ₛ (出池河床水深 m)<input type="number" step="0.001" id="hs" /></label>
        <label>Lₛ (斜段水平投影 m)<input type="number" step="0.001" id="Ls" /></label>
        <label>β (水跃长度校正 0.7~0.8)<input type="number" step="0.0001" id="beta" /></label>
        <label>g (重力加速度 m/s²)<input type="number" step="0.0001" id="g" /></label>
      </div>
      <div class="actions">
        <button class="primary" id="run">计算</button>
        <button class="ghost" id="reset">重置</button>
        <span class="hint">核心：解 h<sub>c</sub><sup>3</sup> - T₀ h<sub>c</sub><sup>2</sup> + αq²/(2gp²) = 0，按正根取最大值。</span>
      </div>
      <div class="result" id="result"></div>
    </section>

    <section class="panel light">
      <h2>提示</h2>
      <ul>
        <li>T₀ 可由已知/设计的 h<sub>c</sub> 反算：T₀ = h<sub>c</sub> + αq²/(2gp²h<sub>c</sub><sup>2</sup>)；也可直接填入已有计算值。</li>
        <li>h′ₛ 取尾水水位线或经验尾水曲线对应的水深，需与池底同一高程基准。</li>
        <li>ΔZ = αq²/(2gp²h′ₛ²) - αq²/(2g h<sub>c</sub>''²)，取正负按公式。</li>
        <li>h<sub>c</sub>'' = (h<sub>c</sub>/2) (√(1 + 8αq²/(g h<sub>c</sub><sup>3</sup>)) - 1) (b₁/b₂)<sup>0.25</sup>。</li>
        <li>L<sub>j</sub> = 6.9 (h<sub>c</sub>'' - h<sub>c</sub>)，L<sub>sj</sub> = L<sub>s</sub> + β L<sub>j</sub>。</li>
      </ul>
    </section>
  </main>

  <footer>
    <div>仓库：<a href="https://github.com/wmwyy/xlc" target="_blank" rel="noreferrer">github.com/wmwyy/xlc</a></div>
    <div class="note">计算示例：σ₀=1.05, α=1.0, q=5, b₁=10, b₂=12, T₀=8, p=1, h′ₛ=3, Lₛ=5, β=0.75, g=9.81。</div>
  </footer>

  <script src="app.js"></script>
</body>
</html>
